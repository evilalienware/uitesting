local UI = {}

function UI:Initialize()
    local ScreenGui = Instance.new("ScreenGui")
    local Main = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    local UICorner = Instance.new("UICorner")

    -- ... (Your setup code remains unchanged)

    -- Keep track of the total height of all buttons added
    local totalButtonHeight = 0

    -- Functions
    function UI:SetTitle(name, text)
        Title.Name = name
        Title.Text = text
    end

    function UI:AddButton(name, text, callback)
        local btn = Instance.new("TextButton")
        btn.Parent = Main
        btn.Name = name
        btn.Text = text
        btn.Position = UDim2.new(0.0625, 0, 0.262008727 + totalButtonHeight, 0)
        btn.BackgroundColor3 = Color3.fromRGB(137, 255, 131)
        btn.BorderColor3 = Color3.fromRGB(0, 0, 0)
        btn.BorderSizePixel = 0
        btn.Size = UDim2.new(0, 168, 0, 28)
        btn.Font = Enum.Font.SourceSansBold
        btn.TextColor3 = Color3.fromRGB(0, 0, 0)
        btn.TextScaled = true
        btn.TextSize = 14.000
        btn.TextWrapped = true

        local btnUICorner = Instance.new("UICorner")
        btnUICorner.CornerRadius = UDim.new(0, 13)
        btnUICorner.Parent = btn

        if callback then
            btn.MouseButton1Click:Connect(callback)
        end

        -- Adjust the totalButtonHeight
        totalButtonHeight = totalButtonHeight + btn.Size.Y.Offset

        -- Adjust the frame size if necessary
        if totalButtonHeight + Title.Size.Y.Offset > Main.Size.Y.Offset then
            Main.Size = Main.Size + UDim2.new(0, 0, 0, btn.Size.Y.Offset)
        end

        return btn
    end

    return UI
end

return UI
